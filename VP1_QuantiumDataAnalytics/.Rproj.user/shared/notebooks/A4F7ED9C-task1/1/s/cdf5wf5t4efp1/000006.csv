"0",""
"0","#xMain <- data %>% filter(PREMIUM_CUSTOMER==""Mainstream"", #LIFESTAGE==""YOUNG SINGLES/COUPLES"")"
"0",""
"0","#xMain1 <- xMain$BRAND"
"0",""
"0","#tab_fre_brand <- table(data$BRAND)"
"0",""
"0","#tab_fre_brand"
"0",""
"0","###APRIORI"
"0","#library(arules)"
"0","#library(arulesViz)"
"0",""
"0","#glimpse(xMain1)"
"0"," "
"0","#write.csv(xMain1, ""try.csv"")"
"0","#tr <- read.transactions(""try.csv"", format = 'basket')"
"0",""
"0","#summary(tr)"
"0",""
"0","#library(RColorBrewer)"
"0",""
"0","#itemFrequencyPlot(tr,topN=20,type=""absolute"",col=brewer.pal(8,'Pastel2'), main=""Absolute Item Frequency Plot"")"
"0",""
"0",""
"0","#### Deep dive into Mainstream, young singles/couples"
"0","segment1 <‐ data[LIFESTAGE == ""YOUNG SINGLES/COUPLES"" & PREMIUM_CUSTOMER == ""Mainstream"",]"
"0","other <‐ data[!(LIFESTAGE == ""YOUNG SINGLES/COUPLES"" & PREMIUM_CUSTOMER ==""Mainstream""),]"
"0",""
"0","#### Brand affinity compared to the rest of the population"
"0","quantity_segment1 <‐ segment1[, sum(PROD_QTY)]"
"0",""
"0","quantity_other <‐ other[, sum(PROD_QTY)]"
"0",""
"0","quantity_segment1_by_brand <‐ segment1[, .(targetSegment = sum(PROD_QTY)/quantity_segment1), by = BRAND]"
"0",""
"0","quantity_other_by_brand <‐ other[, .(other = sum(PROD_QTY)/quantity_other), by = BRAND]"
"0",""
"0","brand_proportions <‐ merge(quantity_segment1_by_brand, quantity_other_by_brand)[, affinityToBrand := targetSegment/other]"
"0",""
"0","brand_proportions[order(‐affinityToBrand)]"
