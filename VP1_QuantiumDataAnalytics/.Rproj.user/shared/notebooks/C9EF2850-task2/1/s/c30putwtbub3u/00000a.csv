"0",""
"0","#### Calculate these measures over time for each store"
"0","#### Add a new month ID column in the data with the format yyyymm."
"0","library(lubridate)"
"0",""
"0","monthYear <- paste(year(data$DATE),month(data$DATE), sep = ""-"")"
"0","data[, YEARMONTH := monthYear]"
"0",""
"0",""
"0","#### Next, we define the measure calculations to use during the analysis.  For each store and month calculate total sales, number of customers,transactions per customer, chips per customer and the average price per unit."
"0",""
"0","measureOverTime <- data %>% group_by(YEARMONTH) %>% summarise(totSales = sum(TOT_SALES), nCustomers = uniqueN(LYLTY_CARD_NBR), nTxnPerCust = uniqueN(TXN_ID),nChipsPerTxn = sum(PROD_QTY), avgPricePerUnit = sum(TOT_SALES)/sum(PROD_QTY))"
"0","#, nTxnPerCust = uniqueN(TXN_ID)/uniqueN(YEARMONTH), nChipsPerTxn = PROD_QTY/uniqueN(TXN_ID), avgPricePerUnit = sum(TOT_SALES)/sum(PROD_QTY) )"
